<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="HandheldFriendly" content="true" />
  <meta name="MobileOptimized" content="320" />
  <title>Hello H5+</title>
  <!--<script type="text/javascript" src="../js/commonSelf.js"></script>-->
  <script type="text/javascript">
    mounted() {

      const that = this

      this.getList()

      that.$http.post(that.API.getJsSDKApi, {

        'url': window.location.href

      }, (res) => {

        if (res.data.ret_code === '00') {

          wx.config({

            debug: false, // 开启调试模式,

            appId: res.data.appId, // 必填，企业号的唯一标识，此处填写企业号corpid

            timestamp: res.data.timestamp, // 必填，生成签名的时间戳

            nonceStr: res.data.nonceStr, // 必填，生成签名的随机串

            signature: res.data.signature, // 必填，签名，见附录1

            jsApiList: ['scanQRCode'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2

          })

        } else {

          that.$util.errorToast(res.data.ret_msg)

        }

      })

    }

    scaneCode() {

      const that = this

      wx.ready(function () {

        wx.scanQRCode({

          needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，

          scanType: ['qrCode', 'barCode'], // 可以指定扫二维码还是一维码，默认二者都有

          success: function (res) {

            var result = res.resultStr // 当needResult 为 1 时，扫码返回的结果

            console.log(res)

            let params = {
              opType: 'add',
              result
            }

            alert(result)

            // that.$router.push({path: '/speaker_set', query: { boxMsg: encodeURIComponent(JSON.stringify(params)) }})

          }

        })

      })

    }
  </script>
  <style type="text/css">
    html {
      width: 100%;
      height: 100%;
    }

    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: Arial;
      font-size: 16px;
      color: #6c6c6c;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      -webkit-text-size-adjust: none;
    }

    .button {
      font-size: 18px;
      font-weight: normal;
      text-decoration: none;
      display: block;
      text-align: center;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: #FFF;
      background-color: #FFCC33;
      border: 1px solid #ECB100;
      padding: .5em 0em;
      margin: .5em .7em;
      -webkit-border-radius: 5px;
      border-radius: 5px;
    }
  </style>
</head>

<body>
  <div>
    <div class="button" onclick="clicked('barcode_scan.html',true,true);">扫一扫</div>
  </div>
</body>

</html>