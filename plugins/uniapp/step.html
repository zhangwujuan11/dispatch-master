<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>开始订单</title>
  <link rel="stylesheet" type="text/css" href="css/common.css?v=1.1" />
  <script>
    document.write("<link rel='stylesheet' type='text/css' href='css/style.css?v=" + Date.now() + "'/>");
  </script>
  <link rel="stylesheet" type="text/css" href="css/mui.picker.min.css" />
  <link rel="stylesheet" type="text/css" href="plugins/cropper/cropper.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="plugins/cropper/main.css" rel="stylesheet">
  <link rel="stylesheet" href="plugins/mescroll/mescroll.min.css">
  <script type="text/javascript" src="js/mui.min.js"></script>
  <script type="text/javascript" src="js/mui.picker.min.js"></script>

</head>

<body style="background:#efeff4">
  <div id="app">
    <div id="appContent">
      <div v-show="step1">
        <div class="step1" v-show="!showStepTwo">
          <div class="innerCont pb40">
            <div class="item-info">
              <div class="dayCode fixed">今日日期码： <em class="p18 blue">{{dateCode}}</em></div>
              <div class="inner-item">
                <h3 class="item-tit"><span>基本信息</span></h3>
                <ul class="item-lists pb10">
                  <li class="item-list">
                    <em>姓名</em>
                    <p><i class="icon_star"></i><span>{{orderInfo.userName}}</span></p>
                  </li>
                  <li class="item-list">
                    <em>联系方式</em>
                    <p>{{orderInfo.mobile}}</p>
                  </li>
                  <li class="item-list">
                    <em>车牌号码</em>
                    <p>{{orderInfo.carNo}}</p>
                  </li>
                  <li class="item-list">
                    <em>车型</em>
                    <p class="omit">{{orderInfo.carType}}</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="item-info">
              <div class="inner-item">
                <h3 class="item-tit"><span>订单信息</span></h3>
                <ul class="item-lists">
                  <li class="item-list">
                    <em>订单号</em>
                    <p>{{orderInfo.orderSn}}</p>
                  </li>
                  <li class="item-list" v-show="orderInfo.parentTypeId != 1 &&orderInfo.orderPrice">
                    <em>预计服务金额</em>
                    <p><em>¥</em> <span class="p18 blue">{{orderInfo.orderPrice}}</span></p>
                  </li>
                  <li class="item-list" v-show="orderInfo.parentTypeId != 1 && orderInfo.retailPrice">
                    <em>全国零售价</em>
                    <p><em>¥</em> <span class="p18 blue">{{orderInfo.retailPrice}}</span></p>
                  </li>
                  <li class="item-list" v-show="orderInfo.parentTypeId == 1 && orderInfo.memberPrice">
                    <em>会员价格</em>
                    <p><em>¥</em> <span class="p18 red">{{orderInfo.memberPrice}}</span></p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="item-info" v-show="userRights.length>0">
              <div class="inner-item">
                <h3 class="item-tit"><span>权益信息</span></h3>
                <ul class="item-lists">
                  <li class="item-list" v-for="(item,index) in userRights">
                    <!-- <div class="inner-itemList"> -->
                    <em style="line-height:22px;">{{item.name}}</em>
                    <p>剩余（{{item.residualNum}} {{item.units}}）</p>
                    <!-- <span class="maxNo">（{{item.residualNum}}{{item.units}}）</span> -->
                    <!-- <div class="option_number" :useNum="item.useNum" :userRightId="item.userRightId">
                                            <button class='reduction' @click="reduNum(index)">-</button>
                                            <input type="number" class="number" oninput="if(value.length>1)value=value.slice(0,1)" v-model="item.useNum" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" @blur="showMaxNum(index)" />
                                            <button class='add(index)' @click="addNum(index)">+</button>
                                        </div> -->
                    <!-- <p>剩余（{{item.residualNum}}{{item.units}}）</p> -->
                    <!-- </div> -->
                  </li>
                  <!-- <li class="item-list">
                                    <div class="inner-itemList">
                                        <em>免费维修玻璃</em>
                                        <span class="maxNo">（5片）</span>
                                        <div class="option_number">
                                            <button class='reduction'>-</button>
                                            <input type="number" class="number" oninput="if(value.length>1)value=value.slice(0,1)" v-model="userNum2" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" />
                                            <button class='add'>+</button>
                                        </div>
                                    </div>
                                </li> -->
                </ul>
                <div class="no-data" v-show="!userRights.length">
                  暂无权益信息
                </div>
              </div>
            </div>
            <div class="item-info">
              <div class="inner-item">
                <h3 class="item-tit"><span>服务信息</span></h3>
                <ul class="item-lists edit-lists">
                  <li class="item-list">
                    <em>服务开始时间</em>
                    <p>{{orderInfo.appointmentTime}}</p>
                  </li>
                  <li class="item-list">
                    <em>服务类型</em>
                    <p>
                      {{orderInfo.serviceTypeStauts}}
                    </p>
                  </li>
                  <li class="item-list">
                    <em>商品名称</em>
                    <!-- <p>
                      <input type="text" v-model="orderInfo.productName" placeholder="请输入商品名称">
                    </p> -->
                    <div class="glassss">
                      <input type="text" v-model="orderInfo.productName" placeholder="请输入或选择商品" class="chaxun">
                      <div class="serleglass" @click="toProName('proName')">选择商品</div>
                    </div>
                  </li>
                  <li class="item-list">
                    <em>部位</em>
                    <p>
                      {{orderInfo.changePart}}
                    </p>
                  </li>
                  <li class="item-list">
                    <em>玻璃品牌</em>
                    <p>
                      {{orderInfo.productBrand}}
                    </p>
                  </li>
                  <li class="item-list">
                    <em>零件编码</em>
                    <p>
                      <!-- {{orderInfo.partSn}} -->
                      <input type="text" v-model="orderInfo.partSn" placeholder="请输入零件编码">
                    </p>
                  </li>
                  <li class="item-list">
                    <em>选择技师</em>
                    <p @click="optMechanic" class="color-cfcfcd">
                      <label id="choose-opt">{{orderInfo.personName == ''?'请选择技师':orderInfo.personName}}</label>
                    </p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="item-info" v-if="orderInfo.isGift">
              <div class="inner-item">
                <h3 class="item-tit"><span>赠送信息</span></h3>
                <ul class="item-lists">
                  <li class="item-list">
                    <em>赠送服务</em>
                    <p>
                      {{orderInfo.giftService}}
                    </p>
                  </li>
                </ul>

              </div>
            </div>
            <div class="item-info" v-show="orderInfo.userType==18">
              <div class="inner-item">
                <ul class="item-lists edit-lists">
                  <li class="item-list" style="margin-bottom:0">
                    <em>实际服务金额</em>
                    <p style="width:60%">
                      <input type="text" name="" value="" v-model="orderInfo.dealPrice"
                        oninput="if(value.length>11) value=value.slice(0,11)" placeholder="请输入实际服务金额"
                        onkeyup="if(isNaN(value))execCommand('undo')" onafterpaste="if(isNaN(value))execCommand('undo')"
                        style="background:#fff">
                    </p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="btns">
            <button class="startOrder fullBtn" @click="next">下一步</button>
          </div>
        </div>
        <div class="step2" v-show="showStepTwo">
          <div class="innerCont pb40">
            <div class="item-info">
              <div class="dayCode fixed">今日日期码： <em class="p18 blue">{{dateCode}}</em></div>
              <div class="inner-item" v-show="orderAuditList">
                <h3 class="item-tit"><span>审核信息</span></h3>
                <ul class="item-lists" v-for="(item,index) in orderInfo.orderAuditList">
                  <h3 class="tit-require pt10">
                    <em class="red">*</em>
                    <span class="sBlue">{{item.name}}</span>
                  </h3>
                  <p class="markInfo grey">{{item.remarks}}</p>
                  <div class="upDrive">
                    <div class="item-pic">
                      <img :src="item.imgurl" width="100%" />
                      <p>例图</p>
                    </div>
                    <div class="item-pic upLoadImgs" :checkItemId="item.checkItemId" :orderSn="item.orderSn">
                      <img :src="item.checkItemImg?item.checkItemImg:`images/upload.jpg`" class="picFullcar"
                        :checkItemId="item.checkItemId" :orderSn="item.orderSn" width="100%" />
                      <input accept="image/*" type="file" class="addUploadImg" id="uploadIMG"
                        @change="btnUploadFile(index)" />
                      <div class="noPass" v-show="item.auditStatus==-1">
                        <span>不通过</span>
                        <p>重新上传</p>
                      </div>
                    </div>
                    <div v-show="item.auditStatus==-1" class="markInfo red">
                      {{item.auditDes}}
                    </div>
                  </div>
                </ul>
              </div>
              <div class="no-data" v-show="!orderAuditList.length">
                暂无审核信息
              </div>
            </div>

            <div class="item-info" v-show="(orderInfo.parentTypeId == 1 || orderInfo.parentTypeId == 2 || orderInfo.parentTypeId == 36 || orderInfo.parentTypeId == 61 ) && orderInfo.serviceType == 2 && orderInfo.changePart=='前挡'">
              <!--  -->
              <div class="inner-item">
                <h3 class="item-tit"><span>玻璃溯源</span></h3>
                <ul class="item-lists">
                  <li class="item-list">
                    <em>溯源类型</em>
                    <p @click="onGlassType" class="color-cfcfcd">
                      <label id="choose-glass">{{ traceText =='' ? '请选择溯源类型':traceText}}</label>
                    </p>
                  </li>
                  <li class="item-list" v-show="orderInfo.traceSourceType == 1">
                    <em>溯源二维码</em>
                    <div class="orderVin">
                      <!-- <input type="text" name="" value="" v-model="vinNo" placeholder="请输入车辆VIN"> -->
                      <input v-model="traceSeqCode" type="url" @keyup="toUpperCase(traceSeqCode)"
                        style="ime-mode:disabled" placeholder="请扫描玻璃上的二维码" class="chaxun">
                      <div class="order_choose" @click="onQrCode">
                      </div>
                    </div>
                  </li>
                  <li class="item-list" v-show="orderInfo.traceSourceType == 2">
                    <em>13位防伪码</em>
                    <div class="orderVin">
                      <img :src="orderInfo.traceSourceImg?orderInfo.traceSourceImg:`images/upload.jpg`"
                        class="picFullcar" width="100%" />
                      <input accept="image/*" type="file" class="addUploadImg" @change="vinUploadFile" />
                    </div>

                  </li>
                  <li class="item-list" v-show="orderInfo.traceSourceType == 2">
                    <em>产品序列号</em>
                    <div class="orderVin">
                      <input v-model="traceSeqCode" type="number" maxlength="13" style="ime-mode:disabled" placeholder="请填写防伪标上的防伪码"
                        class="chaxun">
                    </div>
                  </li>
                  <li class="item-list" v-show="orderInfo.traceSourceType == 3">
                    <em>16位防伪码</em>
                    <div class="orderVin">
                      <img :src="orderInfo.traceSourceImg?orderInfo.traceSourceImg:`images/upload.jpg`"
                        class="picFullcar" width="100%" />
                      <input accept="image/*" type="file" class="addUploadImg" @change="vinUploadFile" />
                    </div>
                  </li>
                  <li class="item-list" v-show="orderInfo.traceSourceType == 3">
                    <em>16位防伪码</em>
                    <div class="orderVin">
                      <input v-model="traceSeqCode" type="number" maxlength="16" style="ime-mode:disabled" placeholder="请填写防伪标上的防伪码"
                        class="chaxun">
                    </div>
                  </li>
                  <li class="item-list" v-show="orderInfo.traceSourceType == 4">
                    <em>其他玻璃防伪</em>
                    <div class="orderVin">
                      <img :src="orderInfo.traceSourceImg ? orderInfo.traceSourceImg:`images/upload.jpg`"
                        class="picFullcar" width="100%" />
                      <input accept="image/*" type="file" class="addUploadImg" @change="glassUploadFile" />
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="btns" v-show="orderInfo.orderStatus == 101 || orderInfo.orderStatus == 106">
            <button class="cancelOrder" @click="pre">上一步</button>
            <button class="startOrder" @click="subAdd">提交审核</button>
            <!-- <button class="startOrder" @click="showTip" v-show="!showSubUp">提交审核</button> -->
          </div>
          <div class="btns" v-show="orderInfo.orderStatus == 102">
            <button class="startOrder fullBtn" @click="pre">上一步</button>
          </div>
        </div>
        <div class="cropperModal" v-show="cropperShow">
          <div class="container">
            <div class="img-container">
              <img :src="cropperUrl" alt="Picture">
            </div>
          </div>

          <div class="docs-preview clearfix" style="display: none;">
            <div class="modal-body"></div>
          </div>

          <div class="cropperBtn">
            <button @click="setClos">取消</button>
            <button data-method="getCroppedCanvas" type="button" style="background: #349CFF;color: #fff;">
              确定
            </button>
          </div>
        </div>
      </div>
      <div v-show="step4" style="background:#efeff4">
        <div class="search">
          <span class="icon_search"></span>
          <input type="txet" v-model="kw" class="pro-search"
            style="width: 100%; height: 20px; line-height: 20px; padding:12px 0; text-indent: 32px; color: #333" name=""
            @input="search(kw)" :placeholder="searchType == 'proName' ?  `搜索商品名称` : `搜索太阳膜防伪码`">
        </div>
        <div class="excellContent">
          <div class="mp60">
            <div id="mescroll" class="mescroll">
              <ul class="wasteLists fixed" id="dataList">
                <li class="wasteList" v-for="pl in prolist" @click="surSrh(pl)">
                  <p>{{pl.glassName}}</p>
                  <p class="grey">商品编码： [ {{pl.carg}} ] </p>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="tip-box">
      <div class="wx_confirm_tit" id="tip-mes"></div>
    </div>
  </div>
</body>
 
<script src="plugins/vue/vue.js"></script>
<script type="text/javascript" src="plugins/mescroll/mescroll.min.js" charset="utf-8"></script>
<script type='text/javascript' src="js/jquery-1.8.2.min.js"></script> <script src="js/varInfo.js"></script>
<script type='text/javascript' src="js/jweixin-1.2.0.js"></script>
<script type='text/javascript' src="js/common.js?v=0.7"></script>
<script type='text/javascript' src="js/base64.js"></script>

<script type='text/javascript' src="js/jswx.js"></script>
<script type="text/javascript" src="./plugins/cropper/jquery.min.js"></script>
<script type="text/javascript" src="./plugins/cropper/bootstrap.min.js"></script>
<script type="text/javascript" src="./plugins/cropper/cropper.js"></script>
<script>
  document.write("<script type='text/javascript' src='js/Service.js?v=" + Date.now() + "'><\/script>");
  document.write("<script type='text/javascript' src='js/step.js?v=" + Date.now() + "'><\/script>");
</script>
<script>
  $(function () {
    //ios软键盘收起，下面回滚
    $('input,select').on('blur', function () {
      var _self = this;
      setTimeout(function () {
        window.scroll(0, $(_self).offset().top);
      }, 1)
    })
  });
</script>

</html>